<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Hana Orchestrator - Layer Management</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="header">
        <h1>🌟 Hana Orchestrator</h1>
        <p>레이어 관리 대시보드</p>
        <div id="llmStatus" style="font-size: 12px; margin-top: 8px; color: #666;">
            <span id="llmStatusText">LLM 상태 확인 중...</span>
        </div>
    </div>
    
    <div class="container">
        <!-- LLM 준비 안내 카드 (LLM이 준비되지 않았을 때만 표시) -->
        <div class="docker-notice-card" id="llmNoticeCard">
            <h2>🤖 LLM이 준비되지 않았습니다</h2>
            <p>
                Hana Orchestrator를 사용하려면 LLM이 준비되어야 합니다.<br>
                로컬 Ollama를 실행하거나 클라우드 API 키를 설정한 후 아래 버튼을 눌러주세요.
            </p>
            <button class="check-button" onclick="checkLLMStatus()">LLM 상태 확인</button>
            <div class="status-message" id="llmStatusMessage"></div>
        </div>
        
        <div class="left-panel" id="leftPanel">
            <div class="card" id="chatCard">
                <h2>💬 작업 요청</h2>
                <div class="card-content">
                    <div id="chatMessages" style="max-height: 200px; overflow-y: auto; margin-bottom: 10px; padding: 10px; background: #f8f9fa; border-radius: 8px; min-height: 100px;">
                        <p style="color: #666; font-size: 14px; text-align: center; margin-top: 30px;">요청을 입력하고 실행하세요</p>
                    </div>
                    <form id="chatForm" style="display: flex; gap: 8px;">
                        <textarea 
                            id="chatInput" 
                            placeholder="예: Hello를 echo로 출력해줘 (Enter: 전송, Shift+Enter: 줄바꿈)" 
                            rows="2" 
                            style="flex: 1; padding: 10px; border: 2px solid #e0e0e0; border-radius: 8px; font-family: inherit; font-size: 14px; resize: vertical; min-height: 50px; max-width: 100%; box-sizing: border-box; overflow-x: hidden; overflow-wrap: break-word; word-wrap: break-word; word-break: break-word;"
                            required></textarea>
                    </form>
                    <div id="chatStatus" style="margin-top: 8px; font-size: 12px; color: #666;"></div>
                </div>
            </div>
            
            <div class="section-resize-handle" id="resizeHandle0"></div>
            
            <div class="card" id="registerCard">
                <h2>🔗 원격 레이어 등록</h2>
                <div class="card-content">
                    <div id="registerMessage"></div>
                    <form id="registerForm">
                        <div class="form-group">
                            <label for="baseUrl">원격 서버 URL:</label>
                            <input type="url" id="baseUrl" placeholder="http://localhost:8081" required>
                        </div>
                        <button type="submit">등록</button>
                    </form>
                </div>
            </div>
            
            <div class="section-resize-handle" id="resizeHandle1"></div>
            
            <div class="card resizable" id="layersCard">
                <h2>
                    📋 등록된 레이어 목록
                    <button class="refresh-btn" onclick="loadLayers()">새로고침</button>
                </h2>
                <div class="card-content">
                    <div id="layersList" class="layers-list">
                        <p>로딩 중...</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="right-panel" id="rightPanel">
            <div class="card resizable" id="executionsCard">
                <h2>
                    🚀 실행 이력
                    <button class="refresh-btn" onclick="loadExecutions()">새로고침</button>
                </h2>
                <div class="card-content">
                    <div id="executionsList">
                        <p>로딩 중...</p>
                    </div>
                </div>
            </div>
        </div>
        
    </div>
    
    <script src="app.js" defer></script>
</body>
</html>
